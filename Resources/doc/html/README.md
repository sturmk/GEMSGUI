## HOWTO build help

### Collect data

Please, copy here the html and image files in order to generate a new help database. 

Source HTML and image files must be all located in the subfolder `/Resources/doc/html` (no subfolders inside!).

There are two configuration files provided: `gems3helpconfig.toc`  and `gems3helpconfig.qhcp`. 

File `gems3helpconfig.toc` contains an XML code describing what the GEMS Help viewer shows in the "Contents" tab. To change "Contents", edit this file. 
To remove an upper-level section, locate it (it begins with the <section> and ends with the </section> and delete it or move in another place in the file. This has no effect on the actual content of the help database, only on access through the "Contents" tab. 
To add a lower-level entry for a (sub)section called "Title text" pointing to "link" (file or anchor name), add a line 
        `<section title="Title text" ref="link"> </section> `
at the appropriate level of hierarchy.
To delete an entry, locate it and delete the whole line (from `<section `... to `</section>`). 


### [Qt Help Project File](https://doc.qt.io/qt-6/qthelpproject.html)

A Qt help project `gems3helpconfig.qhp` collects all data necessary to generate a compressed help file. Along with the actual help data, like the table of contents, index keywords and help documents

A third configuration file, `gems3helpconfig.qhp` could be generated by the utility `tools/gems3helpconfig-qhp-generator`. 
This operation copies the content of "gems3helpconfig.toc" file into the section <toc> of the "gems3helpconfig.qhp"; then collects the list of all HTML files and image files present in the source directory into the <files> section; and then scans all HTML files for anchors collecting them into the <keywords> section of the "gems3helpconfig.qhp" file. 

`gems3helpconfig.qhp` must be refreshed if new HTML files or objects were added to the system.


```sh
./build/tools/gems3helpconfig-qhp-generator . 
```


### [Generating Qt Help](https://doc.qt.io/qt-6/qthelp-framework.html)

After specifying all the relevant information in `gems3helpconfig.qhp` file, it needs to be compiled by calling the `qhelpgenerator` utility program from Qt library.

To generate both the compressed help and the collection file in one go, use file `gems3helpconfig.qhcp` (the help collection project file).

Next, the `qhelpgenerator` utility program from Qt library is called with the `gems3helpconfig.qhcp` file name 
as command line parameter in order to generate (using the `gems3helpconfig.qhp` file) the help collection database 
file `gems3help.qch` and its header `gems3help.qhc`. 

```sh

./qhelpgenerator gems3helpconfig.qhcp -o gems3help.qhc
```

Find qhelpgenerator on Ubuntu command

```sh
find / -iname qhelpgenerator
#or
find / -name qhelpgenerator 2>/dev/null
```


## Test Changes

To test the generated collection file independently of GEMS, cd in the directory with the help database and start the 
Qt Assistant program by a command line like:

```sh
./assistant -collectionFile gems3help.qhc 
```

### Install changes

To use the updated help database: locate files `gems3help.qch` and `gems3help.qhc` in the subfolder
`/Resources/doc/html`; move them to the subfolder `/Resources/help` (replacing older versions of these files); 
and start GEM-Selektor.  

### To do 

* Resources/doc/html/gems_tutorial.html   not resolved links
../../g_litref.html#1999PARAPP
../../gdb_rkey.html#dbm_SysEq
../../KSExamp/casrco3.html
../../GEMS-Linux-USREF.html#P6880
../../g_litref.html#%5B1995ROB/HEM%5D
../../g_litref.html#%5B1987PLU/BUS%5D
../../g_litref.html#%5B1987PLU/BUS%5D
../../g_litref.html#%5B1987PLU/BUS%5D
../../g_litref.html#%5B1994NOR/MUN%5D
../../g_litref.html#%5B1987PLU/BUS%5D
../../KSExamp/casrco3.html
../../g_litref.html#%5B1987PLU/BUS%5D
../../g_litref.html#%5B1994NOR/MUN%5D
../../g_litref.html#%5B1987PLU/BUS%5D
../../g_litref.html#%5B1995ROB/HEM%5D
../../g_litref.html#%5B1995ROB/HEM%5D
../../gmscript.html
../../gems_ipm.html
../../gemstart.html#SIDEBAR_1

* Resources/doc/html/gems_tutorial.html   not resolved links
../../ge_howto.html#PXXXX
../../g_litref.html#1999PAR/APP
../../g_litref.html#1997KAR/CHU
../../GEMS-Linux-USREF.html#P6880


Last updated by SD on 07.07.2025
 
